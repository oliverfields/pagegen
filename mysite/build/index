<!DOCTYPE html><html lang=en> <head><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width, initial-scale=1.0"><base href=http://localhost><link rel=canonical href=http://localhost/index><meta name=copyright content="Copyright Â© 2025"><meta name=Generator content=Pagegen><link rel=apple-touch-icon sizes=180x180 href=/assets/theme/favicon/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/assets/theme/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/assets/theme/favicon/favicon-16x16.png><link rel=manifest href=/assets/theme/favicon/site.webmanifest><link rel=mask-icon href=/assets/theme/favicon/safari-pinned-tab.svg color=#5bbad5><link rel="shortcut icon" href=/assets/theme/favicon/favicon.ico><meta name=msapplication-TileColor content=#da532c><meta name=msapplication-config content=/assets/theme/favicon/browserconfig.xml><meta name=theme-color content=#ffffff><link rel=stylesheet href=/assets/theme/site.css type=text/css></head> <body> <header> <div class=logo> <a class=page-logo-link href=http://localhost aria-label="Site home"> </a> </div> <nav> </nav> </header> <main> <p>So this is xmas</p> <!-- more --> <p>And what have we done?</p> <p>Fuck you I won't go</p> <h1>Give heading</h1> <p>Get bedding. <em>Slop slop</em></p> <p><a href=https://tidesofsea.com>Take me away</a></p> </main> <footer><hr>Copyright &#169; 2022 - 2025</footer> <script src=/assets/theme/site.js></script> </body> </html> <script>var sleep = time => new Promise(resolve => setTimeout(resolve, time))
var poll = (promiseFn, time) => promiseFn().then(
  sleep(time).then(() => poll(promiseFn, time))
)

var page_loaded_at = new Date();
var url = 'http://localhost:8000/pagegen_site_hash';
console.log(url)
var poll_intervall = 1000 // ms

poll(() => new Promise(() => {
  var http = new XMLHttpRequest();
  http.open('HEAD', url);
  http.onreadystatechange = function() {
    if (this.readyState == this.DONE) {
      var last_modified = new Date(this.getResponseHeader("Last-Modified"));
      console.log(url + ' modified ' + last_modified);
      if (last_modified > page_loaded_at) {
        window.location.reload();
      }
    }
  };
  http.send();
}), poll_intervall)
</script>