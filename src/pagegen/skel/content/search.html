Title: Search
Menu exclude: True
Sitemap exclude: True

.. raw:: html

	<script>
	function hit_in_result(hit, result){
	  for (var i=0;i<result.length;i++) {
	    if (result[i].url == hit.url) {
	      return true
	    }
	  }
	  return false
	}
	
	function do_search() {
	  query = document.getElementById('search-query').value.split(' ');
	  result=[];
	  console.log(query);
	  fetch('/search-index.json')
	  .then(response => response.json())
	  .then(data => {
	    for (var i=0;i<query.length; i++) {
	      var term=query[i];
	      if (typeof data.terms[term] !== 'undefined') {
	        for (var x=0;x<data.terms[term].length; x++) {
	          url_id=data.terms[term][x];
	          hit={
	            url:data.urls[url_id][0],
	            title:data.urls[url_id][1],
	            desc:data.urls[url_id][2]
	          }
	          if (hit_in_result(hit, result) == false) {
	            result.push(hit);
	          }
	        }
	      }
	    }
	    // Build result content
	    if(result.length>0) {
	      html='<div id="hit_count">'+result.length+' results</div>';
	      for (var n=0;n<result.length;n++) {
	        html+='<div class="search_hit"><a href="'+result[n].url+'">'+result[n].title+'</a>'
	        if (result[n].desc.length > 0) {
	          html+='<p>'+result[n].desc+'</p>';
	        }
	        html+='</div>'
	      }
	    }
	    else {
	      html='Sorry, nothing found.'
	    }
	    // Remove any old search results
	    search_results = document.getElementById('search');
	    while (search_results.firstChild) {
	      search_results.removeChild(search_results.firstChild);
	    }
	    search_results.innerHTML = html;
	    //console.log(hit);
	    //document.getElementById("demo").innerHTML = 
	    //'<br>temprature :-'+data.main.temp  
	  });
	}
	</script>
	
	<input type="text" id="search-query" />
	<input type="button" onclick="do_search();" value="Search" />
	<div id="search"></div>
